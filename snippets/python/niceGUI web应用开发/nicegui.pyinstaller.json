{
  "pyinstaller 打包 nicegui": {
    "prefix": ["pkg_nicegui=", "pyinstaller_nicegui="],
    "body": [
      "import os",
      "import shutil",
      "from pathlib import Path",
      "",
      "import ex4nicegui",
      "import nicegui",
      "from PyInstaller.__main__ import run",
      "",
      "# * 要打包的入口文件",
      "app = Path(Path(__file__).parent, 'main.py')",
      "# * 打包后的文件名",
      "app_name = 'NiceGUI_APP'",
      "# * 打包后的图标",
      "app_icon = Path(Path(__file__).parent, 'ico.ico')",
      "",
      "command = [",
      "    f'{app}',  # * 要打包的入口文件",
      "    f'--name={app_name}',  # * 打包后的文件名",
      "    f'--icon={app_icon}',  # * 打包后的图标",
      "    '--onefile',  # 打包成一个文件",
      "    f'--workpath={Path(Path(__file__).parent,'_pyinstaller','build')}',  # 打包时临时文件存放路径",
      "    f'--distpath={Path(Path(__file__).parent,'_pyinstaller','dist')}',  # 打包后文件存放路径",
      "    f'--specpath={Path(Path(__file__).parent,'_pyinstaller')}',  # 存储生成的 .spec 文件的文件夹(默认:SPECPATH当前路径; --add-data时会影响索引路径)",
      "    '--windowed',  # 无控制台窗口",
      "    '--log-level=INFO',  # 编译时控制台信息的详细程度(默认值: INFO): TRACE | DEBUG | INFO | WARN | DEPRECATION | ERROR | FATAL",
      "    '--noconfirm',  # 覆盖输出目录中的原有内容(默认值: SPECPATH/dist/SPECNAME), 不请求确认",
      "    '--clean',  # 清理之前的打包文件",
      "    # todo 打包资源文件 --add-data=资源路径;目标路径",
      "    f'--add-data={Path(nicegui.__file__).parent}{os.pathsep}nicegui',",
      "    f'--add-data={Path(ex4nicegui.__file__).parent}{os.pathsep}ex4nicegui',",
      "    f'--add-data={Path(Path(__file__).parent,'utils')}{os.pathsep}utils',",
      "]",
      "",
      "",
      "if Path(Path(__file__).parent, '_pyinstaller').exists(follow_symlinks=False):",
      "    shutil.rmtree(Path(Path(__file__).parent, '_pyinstaller'))",
      "",
      "run(command)",
      "",
      "print('>> 打包完成 <<')",
      ""
    ],
    "description": "pyinstaller 打包 nicegui"
  }
}
